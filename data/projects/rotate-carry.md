# Rotate Carry

DirectX11を習い始めてから初めての制作ゲームです。

学校の課題として制作したので、ジャンルに指定があり落ちものゲームを作りました。

---

## ゲーム概要

本作ではテトリスを参考にしつつも独自の要素として **色** を追加しています。

落下中にブロックを回転させて色を変え、同じ色が三つ以上揃うことで消すことが出来ます。

### ゲームルール

- ブロックを回転させると色が変化する
- 同じ色が縦・横・斜めに **3つ以上** 揃うと消える
- スコアを競うエンドレスモード

[video:videos/Rotate.mp4]

---

## 詳細：独学での実装要素

この作品では夏休みに独学で勉強した **3Dモデル**、**DirectWrite**、**コントローラ** を実装しています。

---

### 3Dモデルについて

DirectX12の魔導書に記載があった **.pmdモデル** を使用しており、背景のスカイドームとして採用しました。

#### 技術的な実装

- **PMDローダー**: MMD（MikuMikuDance）のモデルフォーマットを読み込み
- **テクスチャマッピング**: スカイドームへのシームレステクスチャ適用
- **深度テスト無効化**: 常に背景として描画されるよう設定

---

### DirectWriteについて

操作UIやスコア、経過時間表示に使用しています。

背景が切り替わった際に文字の色も変えて可読性を保つなどの工夫をしています。

#### 実装した機能

- **動的テキスト更新**: スコアと時間のリアルタイム表示
- **可読性の確保**: 背景に応じた文字色の自動調整
- **フォント管理**: カスタムフォントの読み込みと描画

![背景1](images/Sky1.png)
![背景2](images/Sky2.png)

---

### コントローラについて

本作はキーボードとコントローラの両方に対応しており、コントローラの接続が確認出来たら自動的にUIを変えたりしています。

#### 対応コントローラ

- **Xbox コントローラ**: XInput対応
- **PlayStation コントローラ**: DirectInput対応
- **キーボード**: フルサポート

#### 入力システムの工夫

- **自動検出**: デバイスの接続/切断を監視
- **動的UI切り替え**: 使用中のデバイスに応じたボタン表示
- **入力バッファリング**: コマンド入力のラグ軽減

![ゲームUI 1](images/GameUI1.png)
![ゲームUI 2](images/GameUI2.png)

---

## その他：ゲームデザインの工夫

ゲームポーズ中はブロックを隠すことで配置を考える時間を稼げないようにするなど、実際にテトリスなどの落ちものゲームを遊び研究して取り入れていくことでブラッシュアップしていきました。

### ゲームバランス調整

- **難易度曲線**: 時間経過による落下速度の増加
- **スコアシステム**: 連鎖ボーナスと一度に消した数によるボーナス
- **フェアプレイ**: ポーズ中の盤面非表示

### ユーザーエクスペリエンス

- **操作感**: 即座に反応する入力システム
- **視覚的フィードバック**: ブロックが消える際のエフェクト
- **音響フィードバック**: 操作音とBGMの調和

![ポーズ画面](images/Pose.png)

---

## 使用技術まとめ

### グラフィックス

- **DirectX11**: レンダリングAPI
- **PMDモデル**: 3Dスカイドーム
- **DirectWrite**: テキストレンダリング

### 入力システム

- **XInput**: Xboxコントローラ対応
- **DirectInput**: 汎用コントローラ対応
- **キーボード入力**: Windows API

### ゲームロジック

- **C++**: メインプログラミング言語
- **STL**: データ構造とアルゴリズム

---

## 今後の改善点

- **マルチプレイ対応**: 対戦モードの追加
- **ランキングシステム**: オンラインスコアボード
- **追加ゲームモード**: タイムアタック、ステージクリア型など
- **エフェクト強化**: パーティクルシステムの追加

---